<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Product Details</title>
  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <!-- HEADER -->
  <section id="header">
    <a href="index.html"><img src="imgs/logo.png" class="logo" alt=""></a>

    <div>
      <ul id="navbar">
        <li><a href="index.html">Home</a></li>
        <li><a href="shop.html">Shop</a></li>
        <li><a href="blog.html">Blog</a></li>
        <li><a href="about.html">About us</a></li>
        <li><a href="contact.html">Contact us</a></li>

        <!-- PROTECTED CART ICON -->
        <li>
          <a id="cartLink" style="cursor:pointer;">
            <i class="fas fa-shopping-bag"></i>
          </a>
        </li>

        <!-- Cognito Login / Logout -->
        <li><a id="loginBtn" style="cursor:pointer;">Login</a></li>
        <li><a id="logoutBtn" style="cursor:pointer; display:none;">Logout</a></li>
        <li id="userDisplay" style="margin-left:15px; font-weight:bold;"></li>

      </ul>
    </div>
  </section>

  <!-- PAGE HEADER -->
  <section id="page-header" class="product-header">
    <h2>#Product</h2>
    <p>Details, style & more info</p>
  </section>

  <!-- PRODUCT DETAILS -->
  <section id="prodetails" class="section-p1">

    <!-- left image -->
    <div class="single-pro-image">
      <img src="" width="100%" id="MainImg" alt="Product">
      <div class="small-img-group" id="gallery"></div>
    </div>

    <!-- right side -->
    <div class="single-pro-details">
      <h6 id="p-brand"></h6>
      <h4 id="p-name"></h4>
      <h2 id="p-price"></h2>

      <select>
        <option>Select Size</option>
        <option>Small</option>
        <option>Medium</option>
        <option>Large</option>
        <option>XL</option>
      </select>

      <input type="number" value="1">

      <!-- PROTECTED ADD TO CART -->
      <button class="normal" onclick="addToCart()">Add to Cart</button>

      <h4>Product Details</h4>
      <span id="p-desc"></span>
    </div>

  </section>

  <!-- RELATED PRODUCTS -->
  <section id="Product1" class="section-p1">
    <h2>Related Products</h2>
    <p>You may also like</p>

    <div class="Pro-container">
      <div class="pro" onclick="location.href='product.html?id=f2'">
        <img src="imgs/products/f2.jpg" alt="">
        <div class="des">
          <span>Fendi</span>
          <h5>Green Tee</h5>
          <h4>$56</h4>
        </div>
      </div>

      <div class="pro" onclick="location.href='product.html?id=f3'">
        <img src="imgs/products/f3.jpg" alt="">
        <div class="des">
          <span>Procks</span>
          <h5>Mustard Tee</h5>
          <h4>$80</h4>
        </div>
      </div>

      <div class="pro" onclick="location.href='product.html?id=n4'">
        <img src="imgs/products/n4.jpg" alt="">
        <div class="des">
          <span>Adidas</span>
          <h5>Camo Green</h5>
          <h4>$50</h4>
        </div>
      </div>

      <div class="pro" onclick="location.href='product.html?id=n7'">
        <img src="imgs/products/n7.jpg" alt="">
        <div class="des">
          <span>Xris</span>
          <h5>Turmeric Tee</h5>
          <h4>$40</h4>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="section-p1">
    <div class="col">
      <img src="imgs/logo.png" alt="">
      <h4>Contact</h4>
      <p><strong>Address:</strong> Lorem ipsum dolor sit amet.</p>
      <p><strong>Phone:</strong> 91546255522</p>
      <p><strong>Hours:</strong> Mon–Sat, 10 AM – 6 PM IST</p>
    </div>
  </footer>


<!-- ------------------ PRODUCT DATA + LOADER ------------------ -->
<script>
  const productData = {
    f1:{name:"Astrodes T-Shirt",brand:"Adidas",price:"$60",img:"imgs/products/f1.jpg",
      gallery:["imgs/products/f1.jpg","imgs/products/f2.jpg","imgs/products/f3.jpg"],
      desc:"Soft cotton fabric, breathable and stylish."
    },
    f2:{name:"Trendy Green",brand:"Fendi",price:"$56",img:"imgs/products/f2.jpg",
      gallery:["imgs/products/f2.jpg","imgs/products/f1.jpg","imgs/products/f3.jpg"],
      desc:"Lightweight green T-shirt with premium comfort."
    },
    f3:{name:"Mustard Yellow T-Shirt",brand:"Procks",price:"$80",img:"imgs/products/f3.jpg",
      gallery:["imgs/products/f3.jpg","imgs/products/f4.jpg","imgs/products/f5.jpg"],
      desc:"Premium mustard color tee, perfect for casual outings."
    },
    f4:{name:"Cupid Rose",brand:"Adidas",price:"$100",img:"imgs/products/f4.jpg",
      gallery:["imgs/products/f4.jpg","imgs/products/f1.jpg","imgs/products/f2.jpg"],
      desc:"Stylish pink-toned T-shirt with modern fit."
    },
    f5:{name:"Nike Trunks",brand:"Nike",price:"$75",img:"imgs/products/f5.jpg",
      gallery:["imgs/products/f5.jpg","imgs/products/f6.jpg","imgs/products/f3.jpg"],
      desc:"Lightweight and durable sports trunk."
    },
    f6:{name:"Mixed T-Shirts Pack",brand:"Fendi",price:"$80",img:"imgs/products/f6.jpg",
      gallery:["imgs/products/f6.jpg","imgs/products/f1.jpg","imgs/products/f2.jpg"],
      desc:"Combo pack of mixed designer T-shirts."
    },
    f7:{name:"Bottom Stylers",brand:"Gucci",price:"$60",img:"imgs/products/f7.jpg",
      gallery:["imgs/products/f7.jpg","imgs/products/f6.jpg","imgs/products/f5.jpg"],
      desc:"High-quality comfy bottom wear."
    },
    f8:{name:"Cult Classic",brand:"Adidas",price:"$40",img:"imgs/products/f8.jpg",
      gallery:["imgs/products/f8.jpg","imgs/products/f7.jpg","imgs/products/f6.jpg"],
      desc:"Classic T-shirt with evergreen design."
    },

    /* NEW ARRIVALS */
    n1:{name:"Plain Blue Tee",brand:"StyleMe",price:"$10",img:"imgs/products/n1.jpg",
      gallery:["imgs/products/n1.jpg","imgs/products/n2.jpg"],
      desc:"Minimal design, super comfortable."
    },
    n2:{name:"Fits Best",brand:"Fendi",price:"$56",img:"imgs/products/n2.jpg",
      gallery:["imgs/products/n2.jpg","imgs/products/n1.jpg"],
      desc:"A best-fit casual T-shirt for daily wear."
    },
    n3:{name:"Off-White Formal Shirt",brand:"Funks",price:"$25",img:"imgs/products/n3.jpg",
      gallery:["imgs/products/n3.jpg","imgs/products/n4.jpg"],
      desc:"Premium off-white shirt perfect for semi-formal events."
    },
    n4:{name:"Camo Green Shirt",brand:"Adidas",price:"$50",img:"imgs/products/n4.jpg",
      gallery:["imgs/products/n4.jpg","imgs/products/n6.jpg"],
      desc:"Military-style green casual shirt."
    },
    n5:{name:"Denim Blue Tee",brand:"Denim",price:"$75",img:"imgs/products/n5.jpg",
      gallery:["imgs/products/n5.jpg","imgs/products/n1.jpg"],
      desc:"Blue denim-styled casual T-shirt."
    },
    n6:{name:"Fendi Shorts",brand:"Fendi",price:"$30",img:"imgs/products/n6.jpg",
      gallery:["imgs/products/n6.jpg","imgs/products/n7.jpg"],
      desc:"Comfortable sports shorts with breathable fabric."
    },
    n7:{name:"Turmeric-Yellow Tee",brand:"Xris",price:"$40",img:"imgs/products/n7.jpg",
      gallery:["imgs/products/n7.jpg","imgs/products/n8.jpg"],
      desc:"Bright colored T-shirt with soft cotton fabric."
    },
    n8:{name:"Classic Black Tee",brand:"Adidas",price:"$40",img:"imgs/products/n8.jpg",
      gallery:["imgs/products/n8.jpg","imgs/products/n7.jpg"],
      desc:"Timeless black T-shirt with premium finish."
    }
  };

  // Load product
  const id = new URLSearchParams(window.location.search).get("id");
  const product = productData[id];

  document.getElementById("MainImg").src = product.img;
  document.getElementById("p-name").innerText = product.name;
  document.getElementById("p-brand").innerText = product.brand;
  document.getElementById("p-price").innerText = product.price;
  document.getElementById("p-desc").innerText = product.desc;

  const galleryContainer = document.getElementById("gallery");
  galleryContainer.innerHTML = product.gallery.map(src => `
    <div class="small-img-col">
      <img src="${src}" class="small-img" width="100%">
    </div>
  `).join("");

  setTimeout(() => {
    document.querySelectorAll(".small-img").forEach(img => {
      img.onclick = () => document.getElementById("MainImg").src = img.src;
    });
  }, 200);
</script>


<!-- ------------------ PROTECTED ADD TO CART ------------------ -->
<script>
  function addToCart() {
    const idToken = localStorage.getItem("id_token");

    if (!idToken) {
      alert("Please login to add items to the cart.");
      window.location.href = loginUrl;
      return;
    }

    const id = new URLSearchParams(window.location.search).get("id");
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    const exists = cart.find(item => item.id === id);
    if (exists) {
      exists.qty++;
    } else {
      cart.push({
        id: id,
        name: productData[id].name,
        price: productData[id].price.replace("$",""),
        img: productData[id].img,
        qty: 1
      });
    }

    localStorage.setItem("cart", JSON.stringify(cart));
    alert("Added to cart!");
  }
</script>
<script src="https://cdn.jsdelivr.net/npm/appwrite@13.0.1"></script>
<script src="appwrite.js"></script>

<script src="auth.js"></script>

</body>
</html>
